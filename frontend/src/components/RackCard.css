.rack-card { background:var(--color-surface); border-radius:18px; box-shadow:0 2px 6px rgb(0 0 0 / 6%); padding:14px 16px 16px; transition:transform .25s, box-shadow .25s, border-color .25s; border-left:6px solid; position:relative; overflow:hidden; display:flex; flex-direction:column; gap:8px; }
.rack-card.minimal { background:transparent; box-shadow:none; padding:0; border-left:none; border-radius:0; overflow:visible; }
.rack-card.minimal:hover { transform:none; box-shadow:none; }
.rack-card.minimal .rack-card-body { gap:2px; }
.rack-card.minimal .rack-visual { padding:2px 4px 4px; border-radius:10px; }
.rack-card.minimal .rack-visual-wrapper { padding-top:0; }

/* Warehouse accent strip */
.rack-card.has-accent::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg,var(--warehouse-accent) 0%, var(--warehouse-accent-soft) 100%);
}

.rack-card.modern {
    position: relative;
    overflow: hidden;
}

.rack-card:hover { transform: translateY(-6px); box-shadow: 0 10px 28px -4px rgb(0 0 0 / 18%); }

/* legacy utilization border colors - could map via classes to tokens */
.rack-card.green { border-left-color: var(--color-success); }

.rack-card.orange { border-left-color: var(--color-warn); }

.rack-card.red { border-left-color: var(--color-error); }

.rack-details-btn { background: transparent; border: 1px solid var(--color-border); border-radius: 8px; padding: 6px; cursor: pointer; }

.rack-details-btn:hover { background-color: var(--color-surface-muted); }

.rack-card-body { display:flex; flex-direction:column; gap:10px; }

/* Rack schematic */
.rack-visual-wrapper { width:100%; display:flex; justify-content:center; position:relative; padding-top:0; }
.rack-visual { --cell-size:24px; --gap:3px; position:relative; display:flex; align-items:stretch; gap:4px; padding:4px 6px 6px; background:linear-gradient(135deg,var(--color-surface-alt),color-mix(in srgb, var(--color-primary-soft) 30%, var(--color-surface-alt))); border:1px solid var(--color-border); border-radius:12px; transition:transform .25s, box-shadow .25s; }
.rack-visual.scale-sm { --cell-size:20px; }
.rack-visual.scale-md { --cell-size:24px; }
.rack-visual.scale-lg { --cell-size:30px; }
.rack-visual.scale-xl { --cell-size:36px; }
.rack-rail { width:8px; background:linear-gradient(180deg,var(--color-success),color-mix(in srgb, var(--color-success) 70%, black 0%))!important; border-radius:6px; box-shadow:inset 0 0 0 1px color-mix(in srgb, var(--color-success) 65%, transparent),0 0 0 1px color-mix(in srgb, var(--color-success) 7%, transparent); }
.rack-visual.status-maintenance .rack-rail { background:linear-gradient(180deg,var(--color-maintenance),color-mix(in srgb, var(--color-maintenance) 75%, black 0%))!important; box-shadow:inset 0 0 0 1px var(--color-warn-deep); }
.rack-visual.status-inactive .rack-rail { background:linear-gradient(180deg,var(--color-inactive),color-mix(in srgb, var(--color-inactive) 75%, black 0%))!important; box-shadow:inset 0 0 0 1px color-mix(in srgb, var(--color-inactive) 65%, transparent); }
.rack-grid { display:grid; gap:var(--gap); }
.rack-slot { width:var(--cell-size); height:var(--cell-size); background:var(--color-surface-alt); border-radius:5px; box-shadow:inset 0 0 0 1px var(--color-border); position:relative; overflow:hidden; }
.rack-slot::after { content:''; position:absolute; inset:0; background:linear-gradient(135deg,var(--color-surface),var(--color-surface-muted)); opacity:0; transition:opacity .2s; }
.rack-slot:hover::after { opacity:.35; }
.rack-slot.filled { background:linear-gradient(135deg,var(--color-primary),var(--color-primary-hover)); box-shadow:inset 0 0 0 1px var(--color-primary-active), 0 2px 4px -1px rgb(0 0 0 / 25%); }
.rack-visual-util-low .rack-slot.filled { background:linear-gradient(135deg,var(--color-success),color-mix(in srgb, var(--color-success) 75%, var(--color-black))); }
.rack-visual-util-med .rack-slot.filled { background:linear-gradient(135deg,var(--color-warn),color-mix(in srgb, var(--color-warn) 75%, var(--color-black))); }
.rack-visual-util-high .rack-slot.filled { background:linear-gradient(135deg,var(--color-error),color-mix(in srgb, var(--color-error) 75%, var(--color-black))); }

/* Bin maintenance or blocked overlay markers (future per-bin) */
.rack-slot.state-maintenance { background:linear-gradient(135deg,var(--soft-info-bg),color-mix(in srgb, var(--soft-info-bg) 50%, white)); box-shadow:inset 0 0 0 1px var(--soft-info-border); }
.rack-slot.state-blocked { background:linear-gradient(135deg,var(--soft-error-bg),color-mix(in srgb, var(--soft-error-bg) 50%, white)); box-shadow:inset 0 0 0 1px var(--soft-error-border); }
.rack-util-badge { display:none; }

/* Name board base (colors applied inline for legend match) */
.rack-name-board { position:absolute; top:0; left:50%; transform:translate(-50%, -52%); padding:2px 8px 3px; border-radius:7px; font-weight:600; font-size:12px; letter-spacing:.4px; display:flex; align-items:center; box-shadow:0 2px 4px rgb(0 0 0 / 15%); min-width:60px; justify-content:center; backdrop-filter:blur(2px); z-index:5; animation:fadeSlide .35s ease; }
.rack-name-board .rack-name-text { position:relative; z-index:1; }

.rack-bin-count { text-align:center; font-size:11px; margin-top:4px; font-weight:600; color: var(--color-text); padding-bottom:6px; }

.subtext { font-size:12px; color: var(--color-text-subtle); }

/* Details button overlay */

/* Clickable visual */
.rack-visual.clickable { cursor:pointer; }
.rack-visual.clickable:focus-visible { outline:2px solid var(--color-primary); outline-offset:3px; }
.rack-visual.clickable:hover { box-shadow:0 4px 14px -2px rgb(0 0 0 / 18%); transform:translateY(-2px); }

@keyframes fadeSlide { from { opacity:0; transform:translate(-50%, -40%); } to { opacity:1; transform:translate(-50%, -52%); } }

/* Stronger inactive distinction */
.rack-visual.status-inactive .rack-rail { background:linear-gradient(180deg,color-mix(in srgb, var(--color-inactive) 85%, white),var(--color-inactive))!important; box-shadow:inset 0 0 0 1px color-mix(in srgb, var(--color-inactive) 65%, transparent); }
